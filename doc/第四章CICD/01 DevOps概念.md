# DevOps是什么

![image-20240414221750855](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219584.png)

DevOps: Development 和 Operations 的组合 

虽然字面意思只涉及到了开发团队和运维团队,其实QA测试团队也是参与其中的。

DevOps 看作开发（Development）、运维（Operations）和质量保障（QA）三者的交集。 

在传统的软件开发流程中，开发团队负责编写代码，QA团队负责测试代码，而运维团队负责部署和维护应用程序。这些团队通常是独立工作的，往往存在沟通壁垒和协作不足的情况。

在DevOps中，开发、运维和QA团队被视为一个整体，他们之间的界限变得模糊，更加注重团队之间的协作和共享责任。开发团队编写的代码需要经过QA团队的测试，并且运维团队也需要参与到开发和测试的过程中，以确保代码的可部署性和可维护性。

突出重视**软件开发人员和运维人员的沟通合作**，通过自动化流程来使得软件构建、测试、 发布更 加快捷、频繁和可靠。 

DevOps 希望做到的是软件产品交付过程中 IT 工具链的打通，使得各个团队减少时间损耗，更加高效地协同工作。

![image-20240415100111378](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219835.png)

整体的软件开发流程包括

PLAN（规划）：开发团队根据客户的目标制定开发计划。

CODE(代码):根据规划阶段确定的需求，进行编码实现。

BUILD（构建）：编码完成后，将代码构建并且运行。

TEST（测试）：对构建后的软件进行测试，包括单元测试、集成测试、系统测试等，确保软件的质量和稳定性。

DEPLOY（部署）：代码经过测试后，将认定代码交给运维团队。

Operate（运营）：运维团队将代码部署到生产环境

Monitor（监控）： 项目部署上线后，持续监控软件的性能、运行状态和用户体验，及时发现并解决问题。

Integrate（集成）： 将监控阶段收到的反馈发送回PLAN阶段开始新的流程。

为了保证整体流程可以搞笑的完成，各个阶段都有比较常见的工具：



![image-20240415095904430](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219748.png)



简化下来开发人员通过git将代码push到远程仓库，jenkins将代码pull下来，进行build构建，最后通过docker部署

![image-20240415100815132](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219608.png)

# CICD是什么

持续集成 持续部署

## 基本理念

![image-20240414222238637](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152220787.png)

1、持续集成（Continuous Integration）

持续集成是指软件个人研发的部分向软件整体部分交付，频繁进行集成以便更快地发现 其中的错 误。“持续集成”源自于极限编程（XP），是 XP 最初的 12 种实践之一。

CI 需要具备这些：

- 全面的自动化测试。这是实践持续集成&持续部署的基础，同时，选择合适的 自动化测试工具也极 其重要；

- 灵活的基础设施。容器，虚拟机的存在让开发人员和 QA 人员不必再大费周 折； 

- 版本控制工具。如 Git，CVS，SVN 等； 

- 自动化的构建和软件发布流程的工具，如 Jenkins，flow.ci； 

- 反馈机制。如构建/测试的失败，可以快速地反馈到相关负责人，以尽快解决达到一个更稳定的版 本。

2、持续交付（Continuous Delivery）

持续交付在持续集成的基础上，将集成后的代码部署到更贴近真实运行环境的「类生产环境」 （production-like environments）中。持续交付优先于整个产品生命周期的软件部署，建立 在高水平自 动化持续集成之上。（灰度发布）

持续交付和持续集成的优点非常相似：

- 快速发布。能够应对业务需求，并更快地实现软件价值。 

- 编码->测试->上线->交付的频繁迭代周期缩短，同时获得迅速反馈； 

- 高质量的软件发布标准。整个交付过程标准化、可重复、可靠， 

- 整个交付过程进度可视化，方便团队人员了解项目成熟度； 

- 更先进的团队协作方式。从需求分析、产品的用户体验到交互 设计、开发、测试、运维等角色密 切协作，相比于传统的瀑布式软件团队，更少浪费。

3.持续部署（Continuous Deployment）

持续部署是指当交付的代码通过评审之后，自动部署到生产环境中。持续部署是持续交付的最高阶段。 这意味着，所有通过了一系列的自动化测试的改动都将自动部署到生产环境。它也可以被称 为“Continuous Release”。

持续部署主要好处是，可以相对独立地部署新的功能，并能快速地收集真实用户的反馈。

开发人员代码敲完。可以release的时候，提交代码， 剩下的全部一站式自动搞定

## 最佳实践

### 内循环与外循环

![image-20240415081951665](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219354.png)

内循环（开发要做的事情）： 编码、测试、运行、debug、提

代码推送到代码仓库（svn，git）【代码回滚】

进行CI过程（持续集成），万物皆可容器化。打包成一个Docker镜

镜像推送到镜像仓库

测试

持续部署流程（CD），拿到之前的镜像，进行CD。怎么放到各种环境。uat、test、prod

外循环（）：

监控

生产环境的管理

线上反馈到开发

### 实践流程

![image-20240415082120585](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152219529.png)

新功能，bug修复。

创建分支来做这个事情（开发功能）

提交分支的代码改变

进入持续集成流程

​	当前分支代码功能性自动化构建和测试 自动工具推送这次提交 自动化集成测试 可以看到效果 人工确认此次功能是否发布到生产环境

代码合并。

进入持续部署流程

构建、测试、发布.....

## CICD LandSpace

禅道

![image-20240415092930662](https://gitee.com/dongguo4812_admin/image/raw/master/image/202404152220770.png)